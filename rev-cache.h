begin_unit
begin_ifndef
ifndef|#
directive|ifndef
name|REV_CACHE_H
end_ifndef
begin_define
DECL|macro|REV_CACHE_H
define|#
directive|define
name|REV_CACHE_H
end_define
begin_struct
DECL|struct|rev_cache
specifier|extern
struct|struct
name|rev_cache
block|{
DECL|member|head_list
name|struct
name|rev_cache
modifier|*
name|head_list
decl_stmt|;
DECL|member|children
name|struct
name|rev_list_elem
modifier|*
name|children
decl_stmt|;
DECL|member|parents
name|struct
name|rev_list_elem
modifier|*
name|parents
decl_stmt|;
DECL|member|parents_tail
name|struct
name|rev_list_elem
modifier|*
name|parents_tail
decl_stmt|;
DECL|member|num_parents
name|unsigned
name|short
name|num_parents
decl_stmt|;
DECL|member|num_children
name|unsigned
name|short
name|num_children
decl_stmt|;
DECL|member|written
name|unsigned
name|int
name|written
range|:
literal|1
decl_stmt|;
DECL|member|parsed
name|unsigned
name|int
name|parsed
range|:
literal|1
decl_stmt|;
DECL|member|work
name|unsigned
name|int
name|work
range|:
literal|30
decl_stmt|;
DECL|member|work_ptr
name|void
modifier|*
name|work_ptr
decl_stmt|;
DECL|member|sha1
name|unsigned
name|char
name|sha1
index|[
literal|20
index|]
decl_stmt|;
block|}
modifier|*
modifier|*
name|rev_cache
struct|;
end_struct
begin_decl_stmt
specifier|extern
name|int
name|nr_revs
decl_stmt|,
name|alloc_revs
decl_stmt|;
end_decl_stmt
begin_struct
DECL|struct|rev_list_elem
struct|struct
name|rev_list_elem
block|{
DECL|member|next
name|struct
name|rev_list_elem
modifier|*
name|next
decl_stmt|;
DECL|member|ri
name|struct
name|rev_cache
modifier|*
name|ri
decl_stmt|;
block|}
struct|;
end_struct
begin_function_decl
specifier|extern
name|int
name|find_rev_cache
parameter_list|(
specifier|const
name|unsigned
name|char
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
specifier|extern
name|int
name|read_rev_cache
parameter_list|(
specifier|const
name|char
modifier|*
parameter_list|,
name|FILE
modifier|*
parameter_list|,
name|int
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
specifier|extern
name|int
name|record_rev_cache
parameter_list|(
specifier|const
name|unsigned
name|char
modifier|*
parameter_list|,
name|FILE
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
specifier|extern
name|void
name|write_rev_cache
parameter_list|(
specifier|const
name|char
modifier|*
name|new
parameter_list|,
specifier|const
name|char
modifier|*
name|old
parameter_list|)
function_decl|;
end_function_decl
begin_endif
endif|#
directive|endif
end_endif
end_unit
