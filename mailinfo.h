begin_unit
begin_ifndef
ifndef|#
directive|ifndef
name|MAILINFO_H
end_ifndef
begin_define
DECL|macro|MAILINFO_H
define|#
directive|define
name|MAILINFO_H
end_define
begin_define
DECL|macro|MAX_BOUNDARIES
define|#
directive|define
name|MAX_BOUNDARIES
value|5
end_define
begin_struct
DECL|struct|mailinfo
struct|struct
name|mailinfo
block|{
DECL|member|input
name|FILE
modifier|*
name|input
decl_stmt|;
DECL|member|output
name|FILE
modifier|*
name|output
decl_stmt|;
DECL|member|patchfile
name|FILE
modifier|*
name|patchfile
decl_stmt|;
DECL|member|name
name|struct
name|strbuf
name|name
decl_stmt|;
DECL|member|email
name|struct
name|strbuf
name|email
decl_stmt|;
DECL|member|keep_subject
name|int
name|keep_subject
decl_stmt|;
DECL|member|keep_non_patch_brackets_in_subject
name|int
name|keep_non_patch_brackets_in_subject
decl_stmt|;
DECL|member|add_message_id
name|int
name|add_message_id
decl_stmt|;
DECL|member|use_scissors
name|int
name|use_scissors
decl_stmt|;
DECL|member|use_inbody_headers
name|int
name|use_inbody_headers
decl_stmt|;
DECL|member|metainfo_charset
specifier|const
name|char
modifier|*
name|metainfo_charset
decl_stmt|;
DECL|member|content
name|struct
name|strbuf
modifier|*
name|content
index|[
name|MAX_BOUNDARIES
index|]
decl_stmt|;
DECL|member|content_top
name|struct
name|strbuf
modifier|*
modifier|*
name|content_top
decl_stmt|;
DECL|member|charset
name|struct
name|strbuf
name|charset
decl_stmt|;
DECL|member|message_id
name|char
modifier|*
name|message_id
decl_stmt|;
enum|enum
block|{
DECL|enumerator|TE_DONTCARE
DECL|enumerator|TE_QP
DECL|enumerator|TE_BASE64
name|TE_DONTCARE
block|,
name|TE_QP
block|,
name|TE_BASE64
block|}
DECL|member|transfer_encoding
name|transfer_encoding
enum|;
DECL|member|patch_lines
name|int
name|patch_lines
decl_stmt|;
DECL|member|filter_stage
name|int
name|filter_stage
decl_stmt|;
comment|/* still reading log or are we copying patch? */
DECL|member|header_stage
name|int
name|header_stage
decl_stmt|;
comment|/* still checking in-body headers? */
DECL|member|p_hdr_data
name|struct
name|strbuf
modifier|*
modifier|*
name|p_hdr_data
decl_stmt|;
DECL|member|s_hdr_data
name|struct
name|strbuf
modifier|*
modifier|*
name|s_hdr_data
decl_stmt|;
DECL|member|log_message
name|struct
name|strbuf
name|log_message
decl_stmt|;
DECL|member|input_error
name|int
name|input_error
decl_stmt|;
block|}
struct|;
end_struct
begin_function_decl
specifier|extern
name|void
name|setup_mailinfo
parameter_list|(
name|struct
name|mailinfo
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
specifier|extern
name|int
name|mailinfo
parameter_list|(
name|struct
name|mailinfo
modifier|*
parameter_list|,
specifier|const
name|char
modifier|*
name|msg
parameter_list|,
specifier|const
name|char
modifier|*
name|patch
parameter_list|)
function_decl|;
end_function_decl
begin_function_decl
specifier|extern
name|void
name|clear_mailinfo
parameter_list|(
name|struct
name|mailinfo
modifier|*
parameter_list|)
function_decl|;
end_function_decl
begin_endif
endif|#
directive|endif
end_endif
begin_comment
comment|/* MAILINFO_H */
end_comment
end_unit
