#!/bin/sh
#
. git-sh-setup-script || die "Not a git archive"
git-fetch-script "$@" || exit 1
merge_head=$(sed -e 's/	.*//' "$GIT_DIR"/FETCH_HEAD | tr '\012' ' ')
merge_name=$(sed -e 's/^[0-9a-f]*	//' "$GIT_DIR"/FETCH_HEAD |
	 tr '\012' ' ')

case "$merge_head" in
'' | *' '?*) die "Cannot resolve multiple heads at the same time (yet)." ;;
esac


git-resolve-script \
	"$(cat "$GIT_DIR"/HEAD)" \
	$merge_head "Merge $merge_name"
